<div id="folder-admin" class="clearfix">
  <% if can?(:upload_file, folder) %>
    <div style="position: relative;">
      <div class="new-folder">
        <button class="button-default">Criar nova pasta</button>
        <div class="new-folder-inner holder" style="display:none;">
          <% @new_folder = Folder.new %>
          <%= form_for [space, @new_folder],
            :remote => true, :method => :post, :html => { :class => 'form-loader concave-form' } do |f| %>
            <%= f.text_field :name %>
            <%= f.hidden_field :space_id, :value => space.id %>
            <%= f.hidden_field :parent_id, :value => folder.id %>
            <%= f.submit 'Ok', :class => "button-primary"%>
            <%= image_tag 'spinner.gif', :id => 'new-folder-spinner', :class => "spinner", :style => 'display: none' %>
          <% end %>
        </div>
      </div>

      <div class="new-file">
        <button class="button-primary upload-button">Upload de arquivo</button>
        <div class="new-file-inner holder" style="display:none;">
          <%= form_for(myfile,
                       :url => do_the_upload_space_folder_path(space.id,
                       folder.id),
                       :remote => true, :html => { :multipart => true,
                                          :class => 'form-loader' }) do |f| %>
            <div class="file-wrapper clearfix">
              <%= f.file_field :attachment %>
            </div>
            <%= f.hidden_field :folder_id, :value => folder.id %>
            <%= hidden_field_tag :space_id,  space.id %>
            <%= submit_tag 'Ok', :class => "button-primary" %>
          <% end %>
        </div>
      </div>
    </div>
  <% end %>
</div>
